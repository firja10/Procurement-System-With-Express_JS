                        
                                <div id="styleSelector"> </div>

                                <!-- <div id="styleSelector"> <%= user_name %></div> -->

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Warning Section Starts -->
    <!-- Older IE warning message -->
    <!--[if lt IE 10]>
    <div class="ie-warning">
        <h1>Warning!!</h1>
        <p>You are using an outdated version of Internet Explorer, please upgrade <br/>to any of the following web browsers to access this website.</p>
        <div class="iew-container">
            <ul class="iew-download">
                <li>
                    <a href="http://www.google.com/chrome/">
                        <img src="/assets/images/browser/chrome.png" alt="Chrome">
                        <div>Chrome</div>
                    </a>
                </li>
                <li>
                    <a href="https://www.mozilla.org/en-US/firefox/new/">
                        <img src="/assets/images/browser/firefox.png" alt="Firefox">
                        <div>Firefox</div>
                    </a>
                </li>
                <li>
                    <a href="http://www.opera.com">
                        <img src="/assets/images/browser/opera.png" alt="Opera">
                        <div>Opera</div>
                    </a>
                </li>
                <li>
                    <a href="https://www.apple.com/safari/">
                        <img src="/assets/images/browser/safari.png" alt="Safari">
                        <div>Safari</div>
                    </a>
                </li>
                <li>
                    <a href="http://windows.microsoft.com/en-us/internet-explorer/download-ie">
                        <img src="/assets/images/browser/ie.png" alt="">
                        <div>IE (9 & above)</div>
                    </a>
                </li>
            </ul>
        </div>
        <p>Sorry for the inconvenience!</p>
    </div>
    <![endif]-->
    <!-- Warning Section Ends -->
    
    <!-- Required Jquery -->


    <!-- <script>
        $(function() {
            
            var current = location.pathname;
            $('nav li a').each( function () {    
                var $this = $(this);
                if($this.attr('href').indexOf(current) !== -1){
                    $this.addClass('active');
                }

            }

            )


        })
    </script> -->


<script>

let lokasi = window.location.pathname ;

console.log(lokasi);


if (lokasi == '/pa_schedule') {
console.log('pa_schedule');
    
} else {
    console.log('nope');
}



</script>


<script type="text/javascript" src="/assets/js/jquery/jquery.min.js"></script>
<script type="text/javascript" src="/assets/js/jquery-ui/jquery-ui.min.js "></script>


<script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.js"></script>

<!-- <script src="https://code.jquery.com/jquery-3.5.1.js"></script> -->
<script src="https://cdn.datatables.net/fixedheader/3.2.3/js/dataTables.fixedHeader.min.js"></script>




<script>

// $(document).ready( function () {
//     $('#Table_Schedule').DataTable();
// } );
// </script>




<script>


    $(document).ready(function () {
    // Setup - add a text input to each footer cell
    $('#Table_Schedule thead tr')
        .clone(true)
        .addClass('filters')
        .appendTo('#Table_Schedule thead');
 
    var table = $('#Table_Schedule').DataTable({
        orderCellsTop: true,
        fixedHeader: true,
        initComplete: function () {
            var api = this.api();
 
            // For each column
            api
                .columns()
                .eq(0)
                .each(function (colIdx) {
                    // Set the header cell to contain the input element
                    var cell = $('.filters th').eq(
                        $(api.column(colIdx).header()).index()
                    );
                    var title = $(cell).text();
                    $(cell).html('<input class="form-control" type="text" placeholder="' + title + '" />');
 
                    // On every keypress in this input
                    $(
                        'input',
                        $('.filters th').eq($(api.column(colIdx).header()).index())
                    )
                        .off('keyup change')
                        .on('change', function (e) {
                            // Get the search value
                            $(this).attr('title', $(this).val());
                            var regexr = '({search})'; //$(this).parents('th').find('select').val();
 
                            var cursorPosition = this.selectionStart;
                            // Search the column for that value
                            api
                                .column(colIdx)
                                .search(
                                    this.value != ''
                                        ? regexr.replace('{search}', '(((' + this.value + ')))')
                                        : '',
                                    this.value != '',
                                    this.value == ''
                                )
                                .draw();
                        })
                        .on('keyup', function (e) {
                            e.stopPropagation();
 
                            $(this).trigger('change');
                            $(this)
                                .focus()[0]
                                .setSelectionRange(cursorPosition, cursorPosition);
                        });
                });
        },
    });
});



</script>




<script>


    $(document).ready(function () {
    // Setup - add a text input to each footer cell
    $('#Tables thead tr')
        .clone(true)
        .addClass('filters')
        .appendTo('#Tables thead');
 
    var table = $('#Tables').DataTable({
        orderCellsTop: true,
        fixedHeader: true,
        initComplete: function () {
            var api = this.api();
 
            // For each column
            api
                .columns()
                .eq(0)
                .each(function (colIdx) {
                    // Set the header cell to contain the input element
                    var cell = $('.filters th').eq(
                        $(api.column(colIdx).header()).index()
                    );
                    var title = $(cell).text();
                    $(cell).html('<input class="form-control" type="text" placeholder="' + title + '" />');
 
                    // On every keypress in this input
                    $(
                        'input',
                        $('.filters th').eq($(api.column(colIdx).header()).index())
                    )
                        .off('keyup change')
                        .on('change', function (e) {
                            // Get the search value
                            $(this).attr('title', $(this).val());
                            var regexr = '({search})'; //$(this).parents('th').find('select').val();
 
                            var cursorPosition = this.selectionStart;
                            // Search the column for that value
                            api
                                .column(colIdx)
                                .search(
                                    this.value != ''
                                        ? regexr.replace('{search}', '(((' + this.value + ')))')
                                        : '',
                                    this.value != '',
                                    this.value == ''
                                )
                                .draw();
                        })
                        .on('keyup', function (e) {
                            e.stopPropagation();
 
                            $(this).trigger('change');
                            $(this)
                                .focus()[0]
                                .setSelectionRange(cursorPosition, cursorPosition);
                        });
                });
        },
    });
});



</script>




<!-- <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> -->





                                   <script>

    //                                                 function filterTable() {
    //   // Declare variables
    //   var TanggalInput, ProdukInput, NoPartInput, PlanProduksiInput,  TanggalFilter, ProdukFilter, NoPartFilter, PlanProduksiFilter, table, tr, tdTanggal, tdProduk, tdNoPart, tdPlanProduksi, i, txtValueName, txtValueAge;
    //   TanggalInput = document.getElementById("TanggalInput");
    //   ProdukInput = document.getElementById("ProdukInput");
    //   NoPartInput = document.getElementById("NoPartInput");
    //   PlanProduksiInput = document.getElementById("PlanProduksiInput");


    //   TanggalFilter = TanggalInput.value.toUpperCase();
    //   ProdukFilter = ProdukInput.value.toUpperCase();
    //   NoPartFilter = NoPartFilter.value.toUpperCase(); 
    //   PlanProduksiFilter = PlanProduksiFilter.value.toUpperCase();                                                       


    //   table = document.getElementById("Table_Schedule");
    //   tr = table.getElementsByTagName("tr");

    //   // Loop through all table rows, and hide those that don't match the search query
    //   for (i = 0; i < tr.length; i++) {
    //     tdTanggal = tr[i].getElementsByTagName("td")[0];
    //     tdProduk = tr[i].getElementsByTagName("td")[1];
    //     tdNoPart = tr[i].getElementsByTagName("td")[2];
    //     tdPlanProduksi = tr[i].getElementsByTagName("td")[3];

    //     if (tdTanggal && tdProduk && tdNoPart && tdPlanProduksi) {
    //       txtValueTanggal = tdTanggal.textContent || tdTanggal.innerText;
    //       txtValueProduk = tdProduk.textContent || tdProduk.innerText;
    //       txtValueNoPart = tdNoPart.textContent || tdNoPart.innerText;
    //       txtValuePlanProduksi = tdPlanProduksi.textContent || tdPlanProduksi.innerText;


    //       if (txtValueTanggal.toUpperCase().indexOf(TanggalFilter) > -1 && txtValueProduk.toUpperCase().indexOf(ProdukFilter) > -1 && txtValueNoPart.toUpperCase().indexOf(NoPartFilter) > -1 && txtValuePlanProduksi.toUpperCase().indexOf(PlanProduksiFilter) > -1) {
    //         tr[i].style.display = "";
    //       } else {
    //         tr[i].style.display = "none";
    //       }
    //     }
    //   }
    // }



                                                </script>






<script src="https://rawgit.com/gionkunz/chartist-js/master/dist/chartist.min.js"></script>






    <script type="text/javascript" src="/assets/js/popper.js/popper.min.js"></script>
    <script type="text/javascript" src="/assets/js/bootstrap/js/bootstrap.min.js "></script>
    <script type="text/javascript" src="/assets/pages/widget/excanvas.js "></script>
    <!-- waves js -->
    <script src="/assets/pages/waves/js/waves.min.js"></script>
    <!-- jquery slimscroll js -->
    <script type="text/javascript" src="/assets/js/jquery-slimscroll/jquery.slimscroll.js "></script>
    <!-- modernizr js -->
    <script type="text/javascript" src="/assets/js/modernizr/modernizr.js "></script>
    <!-- slimscroll js -->
    <script type="text/javascript" src="/assets/js/SmoothScroll.js"></script>
    <script src="/assets/js/jquery.mCustomScrollbar.concat.min.js "></script>
    <!-- Chart js -->
    <script type="text/javascript" src="/assets/js/chart.js/Chart.js"></script>
    <!-- amchart js -->
    <script src="https://www.amcharts.com/lib/3/amcharts.js"></script>
    <script src="/assets/pages/widget/amchart/gauge.js"></script>
    <script src="/assets/pages/widget/amchart/serial.js"></script>
    <script src="/assets/pages/widget/amchart/light.js"></script>
    <script src="/assets/pages/widget/amchart/pie.min.js"></script>
    <script src="https://www.amcharts.com/lib/3/plugins/export/export.min.js"></script>
    <!-- menu js -->
    <script src="/assets/js/pcoded.min.js"></script>
    <script src="/assets/js/vertical-layout.min.js "></script>
    <!-- custom js -->
    <script type="text/javascript" src="/assets/pages/dashboard/custom-dashboard.js"></script>
    <script type="text/javascript" src="/assets/js/script.js "></script>


    <script>

$.ajax({
  url: '/pa_schedule/under_bracket',
  type: 'GET',
  success: (data) => {
    // Handle the data
    const chartData = {
      labels: [],
      data: []
    };

    // data = JSON.parse(data);
    const monthSequence = ['Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni', 'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'];
    data.sort((a, b) => {
        return monthSequence.indexOf(a.bulan) - monthSequence.indexOf(b.bulan);
        });

    console.log(data);
    
    data.forEach((row) => {
      chartData.labels.push(row.bulan);
      chartData.data.push(row.produks);
    });

    console.log(chartData.data);

    var ctx = document.getElementById('myChartUnderBracket').getContext('2d');
        var myChart = new Chart(ctx, {
          type: 'line',
          data: {
            labels: chartData.labels,
            // labels: [],
            datasets: [{
              label: 'Under Bracket',
              data: chartData.data,
              backgroundColor: 'rgba(255, 99, 132, 0.2)',
              borderColor: 'rgba(255, 99, 132, 1)',
              borderWidth: 1
            }]
          },
          options: {
            responsive: true,
            scales: {
              yAxes: [{
                ticks: {
                  beginAtZero: true
                }
              }]
            }
          }
        });

    

  }

});

       
      </script>




<script>

    $.ajax({
      url: '/pa_schedule/inner_tube',
      type: 'GET',
      success: (data) => {
        // Handle the data
        const chartData = {
          labels: [],
          data: []
        };
    
        // data = JSON.parse(data);
        const monthSequence = ['Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni', 'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'];
        data.sort((a, b) => {
            return monthSequence.indexOf(a.bulan) - monthSequence.indexOf(b.bulan);
            });
    
        console.log(data);
        
        data.forEach((row) => {
          chartData.labels.push(row.bulan);
          chartData.data.push(row.produks);
        });
    
        console.log(chartData.data);
    
        var ctx = document.getElementById('myChartInnerTube').getContext('2d');
            var myChart = new Chart(ctx, {
              type: 'line',
              data: {
                labels: chartData.labels,
                // labels: [],
                datasets: [{
                  label: 'Inner Tube',
                  data: chartData.data,
                  backgroundColor: '#87CEFA',
                  borderColor: '#233D8C',
                  borderWidth: 1
                }]
              },
              options: {
                responsive: true,
                scales: {
                  yAxes: [{
                    ticks: {
                      beginAtZero: true
                    }
                  }]
                }
              }
            });
    
        
    
      }
    
    });
    
           
          </script>





<!-- <script>
  $(document).ready(function() {
      $.ajax({
          url: '/jumlah_notifikasi', // Ganti dengan URL Anda
          method: 'GET',
          success: function(data) {
              console.log('Data diterima:', data);
              // Di sini Anda dapat melakukan manipulasi data atau tampilan jika diperlukan
              $('#pesan_notifikasi').text(data[0].jumlah_pesan);
              // console.log(data[0].jumlah_pesan);
          },
          error: function(error) {
              console.error('Terjadi kesalahan:', error);
          }
      });
  });
</script> -->








<script>
  function fetchData() {


    const options = { year: 'numeric', month: 'short', day: 'numeric', hour: 'numeric', minute: 'numeric', second: 'numeric' };

      $.ajax({
          url: '/data_notifikasi', // Update with your server endpoint
          method: 'GET',
          success: function(newData) {

            const jumlah_pesan_deteksi = newData[0].total_pesan;


            // console.log(newData[0].total_pesan);
            
            // console.log(newData[0]);



              $('#data_notifikasi').empty(); // Clear previous data


              


              newData.forEach(item => {

                const recipients = item.nama_penerima.split(';');
                // Check if loggedInUsername is in the recipients list

                const jabatan = $('#jabatan_text').text();
                console.log(recipients);

                
                if (recipients.includes(jabatan)) {

                  $('#pesan_notifikasi').text(jumlah_pesan_deteksi);

                  // console.log(jumlah_pesan_deteksi);

                  $('#data_notifikasi').append(`<li class="waves-effect waves-light">
                                        <div class="media">
                                            <img class="d-flex align-self-center img-radius" src="/assets/images/avatar-3.jpg" alt="Generic placeholder image">
                                            <div class="media-body">
                                                <h5 class="notification-user">` + item.nama_pengirim + `</h5>
                                                <h7 class="notification-user"> Jabatan : ` + jabatan + `</h7>
                                                <p class="notification-msg">` + item.subjek_pesan +`.</p>
                                                <span class="notification-time">`+ formatDate(item.created_at)+`</span>
                                            </div>
                                        </div>
                                    </li>`);


                                  } else {
                                    console.log(jabatan);
                                  }
        
              });



            







           
          },
          error: function(error) {
              console.error('Error fetching data:', error);
          }
      });
  }

  $(document).ready(function() {
      fetchData(); // Fetch initial data
      setInterval(fetchData, 5000); // Fetch data every 5 seconds (for example)
  });



  function formatDate(inputDate) {
  const date = new Date(inputDate);
  const day = date.getDate();
  const monthIndex = date.getMonth();
  const year = date.getFullYear();
  const hours = date.getHours();
  const minutes = date.getMinutes();
  const seconds = date.getSeconds();

  const monthNames = [
    "Jan", "Feb", "Mar", "Apr", "May", "Jun",
    "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"
  ];

  const formattedDate = `${day}-${monthNames[monthIndex]}-${year} ${hours}:${minutes}:${seconds}`;
  return formattedDate;
}
</script>




</script>













<script>

    $.ajax({
      url: '/pa_schedule/total',
      type: 'GET',
      success: (data) => {
        // Handle the data
        const chartData = {
          labels: [],
          data: []
        };
    
        // data = JSON.parse(data);
        const monthSequence = ['Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni', 'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'];
        data.sort((a, b) => {
            return monthSequence.indexOf(a.bulan) - monthSequence.indexOf(b.bulan);
            });
    
        console.log(data);
        
        data.forEach((row) => {
          chartData.labels.push(row.bulan);
          chartData.data.push(row.produks);
        });
    
        console.log(chartData.data);
    
        var ctx = document.getElementById('myChartTotal').getContext('2d');
            var myChart = new Chart(ctx, {
              type: 'line',
              data: {
                labels: chartData.labels,
                // labels: [],
                datasets: [{
                  label: 'Total',
                  data: chartData.data,
                  backgroundColor: '#FFDE80',
                  borderColor: '#FFBD00',
                  borderWidth: 1
                }]
              },
              options: {
                responsive: true,
                scales: {
                  yAxes: [{
                    ticks: {
                      beginAtZero: true
                    }
                  }]
                }
              }
            });
    
        
    
      }
    
    });
    
           
          </script>


          










</body>

</html>
